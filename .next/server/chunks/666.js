"use strict";exports.id=666,exports.ids=[666],exports.modules={3020:(e,t,r)=>{r.d(t,{G:()=>d});var o=r(80),n=r(9885),s=r(5167),a=r.n(s);r(6793);var l=r(6045);let i={lat:40.7128,lng:-74.006};function d({center:e=i,markers:t=[],onLocationSelect:r,className:s,zoom:d=13,showDirections:u=!1,origin:c,destination:g}){let m=(0,n.useRef)(null),f=(0,n.useRef)(null),x=(0,n.useRef)([]),[p,y]=(0,n.useState)(!0),[b,h]=(0,n.useState)(null);(0,n.useEffect)(()=>{let t="pk.eyJ1Ijoibm9yZGluZWF6bmFnMTAiLCJhIjoiY21oMHpxOGZpMGp1NHJrc2I2Y215OTJ4bCJ9.yi3JNnvyyRinigIBdURecg";if(!t){h("Mapbox access token not configured"),y(!1);return}if(m.current)try{a().accessToken=t;let o=new(a()).Map({container:m.current,style:"mapbox://styles/mapbox/streets-v12",center:[e.lng,e.lat],zoom:d});return o.addControl(new(a()).NavigationControl,"top-right"),o.addControl(new(a()).FullscreenControl,"top-right"),r&&o.on("click",e=>{r({lat:e.lngLat.lat,lng:e.lngLat.lng})}),o.on("load",()=>{y(!1)}),o.on("error",e=>{console.error("Mapbox error:",e),h("Failed to load map"),y(!1)}),f.current=o,()=>{o.remove()}}catch(e){console.error("Error initializing Mapbox:",e),h("Failed to initialize map"),y(!1)}},[]),(0,n.useEffect)(()=>{f.current&&!p&&f.current.setCenter([e.lng,e.lat])},[e.lat,e.lng,p]),(0,n.useEffect)(()=>{f.current&&!p&&f.current.setZoom(d)},[d,p]),(0,n.useEffect)(()=>{if(f.current&&!p&&(x.current.forEach(e=>e.remove()),x.current=[],t.forEach((e,t)=>{let r=document.createElement("div");r.className="mapbox-marker",r.style.width="32px",r.style.height="32px",r.style.borderRadius="50%",r.style.backgroundColor=0===t?"#10b981":"#ef4444",r.style.border="2px solid white",r.style.boxShadow="0 2px 4px rgba(0,0,0,0.3)",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.color="white",r.style.fontWeight="bold",r.style.fontSize="14px",r.style.cursor="pointer",e.label&&(r.textContent=e.label);let o=new(a()).Marker(r).setLngLat([e.lng,e.lat]).addTo(f.current);if(e.title){let t=new(a()).Popup({offset:25}).setText(e.title);o.setPopup(t)}x.current.push(o)}),t.length>1)){let e=new(a()).LngLatBounds;t.forEach(t=>{e.extend([t.lng,t.lat])}),f.current.fitBounds(e,{padding:50})}},[t,p]),(0,n.useEffect)(()=>{if(!f.current||p||!u||!c||!g)return;let e=f.current;return e.isStyleLoaded()?v(e,c,g):e.once("load",()=>{v(e,c,g)}),()=>{e&&e.getStyle()&&(e.getLayer("route")&&e.removeLayer("route"),e.getSource("route")&&e.removeSource("route"))}},[c,g,u,p]);let v=async(e,t,r)=>{try{if(!e||!e.getStyle())return;let o=await fetch(`https://api.mapbox.com/directions/v5/mapbox/driving/${t.lng},${t.lat};${r.lng},${r.lat}?geometries=geojson&access_token=${a().accessToken}`,{method:"GET"}),n=await o.json();if(!n.routes||0===n.routes.length){console.error("No route found");return}let s=n.routes[0],l=s.geometry.coordinates;if(!e||!e.getStyle())return;e.getLayer("route")&&e.removeLayer("route"),e.getSource("route")&&e.removeSource("route"),e.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:l}}}),e.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#4F46E5","line-width":5,"line-opacity":.8}});let i=new(a()).LngLatBounds;l.forEach(e=>{i.extend(e)}),e.fitBounds(i,{padding:50})}catch(e){console.error("Error fetching directions:",e)}};return b?o.jsx("div",{className:`relative ${s}`,children:o.jsx("div",{className:"w-full h-full rounded-lg bg-gradient-to-br from-blue-100 to-blue-200 dark:from-gray-800 dark:to-gray-900 flex items-center justify-center border-2 border-dashed border-muted",children:(0,o.jsxs)("div",{className:"text-center p-8 max-w-md",children:[o.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDDFAï¸"}),o.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Map Configuration Required"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:b}),o.jsx("div",{className:"mt-4 p-3 bg-muted rounded-lg text-left",children:(0,o.jsxs)("p",{className:"text-xs font-mono text-muted-foreground",children:["Add to .env.local:",o.jsx("br",{}),o.jsx("span",{className:"text-primary",children:"NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN"}),"=your_token"]})})]})})}):(0,o.jsxs)("div",{className:`relative ${s}`,children:[p&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/20 backdrop-blur-sm z-10 rounded-lg",children:(0,o.jsxs)("div",{className:"text-center",children:[o.jsx(l.Z,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-2"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Loading map..."})]})}),o.jsx("div",{ref:m,className:"w-full h-full rounded-lg",style:{minHeight:"300px"}})]})}},4796:(e,t,r)=>{r.d(t,{C:()=>l});var o=r(80);r(9885);var n=r(7389),s=r(3161);let a=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...r}){return o.jsx("div",{className:(0,s.cn)(a({variant:t}),e),...r})}}};