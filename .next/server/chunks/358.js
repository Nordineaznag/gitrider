"use strict";exports.id=358,exports.ids=[358],exports.modules={4868:(e,t,a)=>{a.d(t,{_:()=>h});var s=a(80),l=a(9885),r=a(3020),n=a(9424),i=a(3478),o=a(7052),c=a(8384),d=a(9518),m=a(5705),u=a(7094),x=a(6583);function h({onLocationSelect:e,initialLocation:t,label:a="Select Location",placeholder:h="Search for a location..."}){let[p,g]=(0,l.useState)(t||null),[f,j]=(0,l.useState)(null),[N,y]=(0,l.useState)(""),[b,v]=(0,l.useState)(!1),[w,k]=(0,l.useState)(!1),[Z,$]=(0,l.useState)([]),[I,C]=(0,l.useState)(!1),[F,J]=(0,l.useState)(!1),M=(0,l.useRef)(null),S=(0,l.useRef)();(0,l.useEffect)(()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{j({lat:e.coords.latitude,lng:e.coords.longitude})},e=>{},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},[]);let L=async e=>{if(y(e),e.length<2){$([]),C(!1);return}S.current&&clearTimeout(S.current),S.current=setTimeout(async()=>{let t="pk.eyJ1Ijoibm9yZGluZWF6bmFnMTAiLCJhIjoiY21oMHpxOGZpMGp1NHJrc2I2Y215OTJ4bCJ9.yi3JNnvyyRinigIBdURecg";if(t){J(!0);try{let a=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(e)}.json?access_token=${t}&autocomplete=true&limit=8&types=address,poi,place,locality,neighborhood`;f&&(a+=`&proximity=${f.lng},${f.lat}`);let s=await fetch(a),l=await s.json();l.features&&($(l.features.map(e=>({id:e.id,place_name:e.place_name,center:e.center,place_type:e.place_type,text:e.text,context:e.context}))),C(!0))}catch(e){console.error("Error searching locations:",e)}finally{J(!1)}}},300)},_=t=>{y(t.place_name),C(!1);let a={lat:t.center[1],lng:t.center[0],address:t.place_name};g(a),e(a)},E=async t=>{g(t),v(!0);let a="pk.eyJ1Ijoibm9yZGluZWF6bmFnMTAiLCJhIjoiY21oMHpxOGZpMGp1NHJrc2I2Y215OTJ4bCJ9.yi3JNnvyyRinigIBdURecg";if(!a){e(t),v(!1);return}try{let s=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${t.lng},${t.lat}.json?access_token=${a}&types=address,poi,place`),l=await s.json();if(l.features&&l.features.length>0){let a=l.features[0].place_name;y(a),e({...t,address:a})}else e(t)}catch(a){console.error("Error reverse geocoding:",a),e(t)}finally{v(!1)}};return(0,l.useEffect)(()=>{let e=e=>{M.current&&!M.current.contains(e.target)&&C(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(i._,{htmlFor:"location-search",children:a}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx(d.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(n.I,{ref:M,id:"location-search",type:"text",placeholder:h,value:N,onChange:e=>L(e.target.value),onFocus:()=>{Z.length>0&&C(!0)},className:"pl-10 pr-10",autoComplete:"off"}),(b||F)&&s.jsx(m.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 animate-spin text-muted-foreground"})]}),I&&Z.length>0&&s.jsx(o.Zb,{className:"absolute top-full left-0 right-0 mt-1 z-50 max-h-[400px] overflow-y-auto shadow-lg",children:s.jsx(o.aY,{className:"p-0",children:Z.map(e=>(0,s.jsxs)("button",{onClick:()=>_(e),className:"w-full text-left px-4 py-3 hover:bg-muted transition-colors flex items-start gap-3 border-b last:border-b-0",children:[s.jsx(u.Z,{className:"w-4 h-4 mt-0.5 text-primary flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:e.text||e.place_name.split(",")[0]}),s.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.place_name})]})]},e.id))})})]}),(0,s.jsxs)(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{"geolocation"in navigator?(k(!0),navigator.geolocation.getCurrentPosition(e=>{let t={lat:e.coords.latitude,lng:e.coords.longitude};j(t),E(t),k(!1)},e=>{console.error("Error getting location:",e),k(!1);let t="Unable to get your location. ";switch(e.code){case e.PERMISSION_DENIED:t+="Please enable location permissions in your browser.";break;case e.POSITION_UNAVAILABLE:t+="Location information is unavailable.";break;case e.TIMEOUT:t+="Location request timed out."}alert(t)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):alert("Geolocation is not supported by your browser.")},disabled:b||w,className:"w-full",children:[w?s.jsx(m.Z,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(x.Z,{className:"w-4 h-4 mr-2"}),w?"Getting Location...":"Use My Current Location"]})]}),s.jsx(o.Zb,{children:s.jsx(o.aY,{className:"p-0",children:s.jsx(r.G,{center:p||f||{lat:40.7128,lng:-74.006},markers:p?[{...p,label:"\uD83D\uDCCD",title:N||"Selected Location"}]:[],onLocationSelect:E,className:"h-[400px] rounded-lg",zoom:p?16:f?13:11})})}),p&&(0,s.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-muted rounded-lg",children:[s.jsx(u.Z,{className:"w-4 h-4 mt-0.5 text-primary flex-shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Selected Location"}),N?s.jsx("p",{className:"text-sm font-medium break-words",children:N}):(0,s.jsxs)("p",{className:"text-sm font-medium",children:[p.lat.toFixed(6),","," ",p.lng.toFixed(6)]})]})]})]})}},2410:(e,t,a)=>{a.d(t,{P:()=>u});var s=a(80),l=a(9885),r=a(3020),n=a(7052),i=a(4796),o=a(7094),c=a(6583),d=a(5441),m=a(6908);function u({pickup:e,destination:t,showDetails:a=!0,className:u}){let[x,h]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let a="pk.eyJ1Ijoibm9yZGluZWF6bmFnMTAiLCJhIjoiY21oMHpxOGZpMGp1NHJrc2I2Y215OTJ4bCJ9.yi3JNnvyyRinigIBdURecg";if(!a)return;let s=async()=>{try{let s=await fetch(`https://api.mapbox.com/directions/v5/mapbox/driving/${e.lng},${e.lat};${t.lng},${t.lat}?access_token=${a}`),l=await s.json();if(l.routes&&l.routes.length>0){let e=l.routes[0],t=e.distance/1609.34,a=e.duration/60,s=t<.1?`${Math.round(e.distance)} m`:`${t.toFixed(1)} mi`,r=a<1?`${Math.round(e.duration)} sec`:a<60?`${Math.round(a)} min`:`${Math.floor(a/60)} hr ${Math.round(a%60)} min`;h({distance:s,duration:r,estimatedFare:Math.round(100*(2+1.5*t))/100})}}catch(e){console.error("Error fetching route info:",e)}};s()},[e.lat,e.lng,t.lat,t.lng]),s.jsx("div",{className:u,children:(0,s.jsxs)(n.Zb,{children:[s.jsx(n.Ol,{children:s.jsx(n.ll,{className:"text-lg",children:"Route Overview"})}),(0,s.jsxs)(n.aY,{className:"space-y-4",children:[a&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center flex-shrink-0",children:s.jsx(o.Z,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Pickup Location"}),s.jsx("p",{className:"text-sm font-medium break-words",children:e.address||`${e.lat.toFixed(4)}, ${e.lng.toFixed(4)}`})]})]}),s.jsx("div",{className:"pl-4 border-l-2 border-dashed border-muted ml-4 py-2",children:x&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)(i.C,{variant:"secondary",className:"gap-1",children:[s.jsx(c.Z,{className:"w-3 h-3"}),x.distance]}),(0,s.jsxs)(i.C,{variant:"secondary",className:"gap-1",children:[s.jsx(d.Z,{className:"w-3 h-3"}),x.duration]}),x.estimatedFare&&(0,s.jsxs)(i.C,{variant:"secondary",className:"gap-1",children:[s.jsx(m.Z,{className:"w-3 h-3"}),"$",x.estimatedFare.toFixed(2)]})]})}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center flex-shrink-0",children:s.jsx(o.Z,{className:"w-4 h-4 text-red-600 dark:text-red-400"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Destination"}),s.jsx("p",{className:"text-sm font-medium break-words",children:t.address||`${t.lat.toFixed(4)}, ${t.lng.toFixed(4)}`})]})]})]}),s.jsx(r.G,{center:{lat:(e.lat+t.lat)/2,lng:(e.lng+t.lng)/2},showDirections:!0,origin:e,destination:t,markers:[{...e,label:"A",title:e.address||"Pickup"},{...t,label:"B",title:t.address||"Destination"}],className:"h-[400px] rounded-lg",zoom:12})]})]})})}}};