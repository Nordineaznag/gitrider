"use strict";exports.id=153,exports.ids=[153],exports.modules={4868:(e,t,r)=>{r.d(t,{_:()=>x});var a=r(80),s=r(9885),n=r(3020),o=r(9424),l=r(3478),i=r(7052),d=r(8384),c=r(9518),u=r(5705),m=r(7094),f=r(6583);function x({onLocationSelect:e,initialLocation:t,label:r="Select Location",placeholder:x="Search for a location..."}){let[g,p]=(0,s.useState)(t||null),[h,b]=(0,s.useState)(null),[y,v]=(0,s.useState)(""),[j,N]=(0,s.useState)(!1),[w,k]=(0,s.useState)(!1),[C,S]=(0,s.useState)([]),[L,E]=(0,s.useState)(!1),[R,Z]=(0,s.useState)(!1),$=(0,s.useRef)(null),I=(0,s.useRef)();(0,s.useEffect)(()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{b({lat:e.coords.latitude,lng:e.coords.longitude})},e=>{},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},[]);let F=async e=>{if(v(e),e.length<2){S([]),E(!1);return}I.current&&clearTimeout(I.current),I.current=setTimeout(async()=>{let t="pk.eyJ1Ijoibm9yZGluZWF6bmFnMTAiLCJhIjoiY21oMHpxOGZpMGp1NHJrc2I2Y215OTJ4bCJ9.yi3JNnvyyRinigIBdURecg";if(t){Z(!0);try{let r=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(e)}.json?access_token=${t}&autocomplete=true&limit=8&types=address,poi,place,locality,neighborhood`;h&&(r+=`&proximity=${h.lng},${h.lat}`);let a=await fetch(r),s=await a.json();s.features&&(S(s.features.map(e=>({id:e.id,place_name:e.place_name,center:e.center,place_type:e.place_type,text:e.text,context:e.context}))),E(!0))}catch(e){console.error("Error searching locations:",e)}finally{Z(!1)}}},300)},M=t=>{v(t.place_name),E(!1);let r={lat:t.center[1],lng:t.center[0],address:t.place_name};p(r),e(r)},J=async t=>{p(t),N(!0);let r="pk.eyJ1Ijoibm9yZGluZWF6bmFnMTAiLCJhIjoiY21oMHpxOGZpMGp1NHJrc2I2Y215OTJ4bCJ9.yi3JNnvyyRinigIBdURecg";if(!r){e(t),N(!1);return}try{let a=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${t.lng},${t.lat}.json?access_token=${r}&types=address,poi,place`),s=await a.json();if(s.features&&s.features.length>0){let r=s.features[0].place_name;v(r),e({...t,address:r})}else e(t)}catch(r){console.error("Error reverse geocoding:",r),e(t)}finally{N(!1)}};return(0,s.useEffect)(()=>{let e=e=>{$.current&&!$.current.contains(e.target)&&E(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(l._,{htmlFor:"location-search",children:r}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),a.jsx(o.I,{ref:$,id:"location-search",type:"text",placeholder:x,value:y,onChange:e=>F(e.target.value),onFocus:()=>{C.length>0&&E(!0)},className:"pl-10 pr-10",autoComplete:"off"}),(j||R)&&a.jsx(u.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 animate-spin text-muted-foreground"})]}),L&&C.length>0&&a.jsx(i.Zb,{className:"absolute top-full left-0 right-0 mt-1 z-50 max-h-[400px] overflow-y-auto shadow-lg",children:a.jsx(i.aY,{className:"p-0",children:C.map(e=>(0,a.jsxs)("button",{onClick:()=>M(e),className:"w-full text-left px-4 py-3 hover:bg-muted transition-colors flex items-start gap-3 border-b last:border-b-0",children:[a.jsx(m.Z,{className:"w-4 h-4 mt-0.5 text-primary flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:e.text||e.place_name.split(",")[0]}),a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.place_name})]})]},e.id))})})]}),(0,a.jsxs)(d.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{"geolocation"in navigator?(k(!0),navigator.geolocation.getCurrentPosition(e=>{let t={lat:e.coords.latitude,lng:e.coords.longitude};b(t),J(t),k(!1)},e=>{console.error("Error getting location:",e),k(!1);let t="Unable to get your location. ";switch(e.code){case e.PERMISSION_DENIED:t+="Please enable location permissions in your browser.";break;case e.POSITION_UNAVAILABLE:t+="Location information is unavailable.";break;case e.TIMEOUT:t+="Location request timed out."}alert(t)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):alert("Geolocation is not supported by your browser.")},disabled:j||w,className:"w-full",children:[w?a.jsx(u.Z,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(f.Z,{className:"w-4 h-4 mr-2"}),w?"Getting Location...":"Use My Current Location"]})]}),a.jsx(i.Zb,{children:a.jsx(i.aY,{className:"p-0",children:a.jsx(n.G,{center:g||h||{lat:40.7128,lng:-74.006},markers:g?[{...g,label:"\uD83D\uDCCD",title:y||"Selected Location"}]:[],onLocationSelect:J,className:"h-[400px] rounded-lg",zoom:g?16:h?13:11})})}),g&&(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-muted rounded-lg",children:[a.jsx(m.Z,{className:"w-4 h-4 mt-0.5 text-primary flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Selected Location"}),y?a.jsx("p",{className:"text-sm font-medium break-words",children:y}):(0,a.jsxs)("p",{className:"text-sm font-medium",children:[g.lat.toFixed(6),","," ",g.lng.toFixed(6)]})]})]})]})}},3020:(e,t,r)=>{r.d(t,{G:()=>d});var a=r(80),s=r(9885),n=r(5167),o=r.n(n);r(6793);var l=r(6045);let i={lat:40.7128,lng:-74.006};function d({center:e=i,markers:t=[],onLocationSelect:r,className:n,zoom:d=13,showDirections:c=!1,origin:u,destination:m}){let f=(0,s.useRef)(null),x=(0,s.useRef)(null),g=(0,s.useRef)([]),[p,h]=(0,s.useState)(!0),[b,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{let t="pk.eyJ1Ijoibm9yZGluZWF6bmFnMTAiLCJhIjoiY21oMHpxOGZpMGp1NHJrc2I2Y215OTJ4bCJ9.yi3JNnvyyRinigIBdURecg";if(!t){y("Mapbox access token not configured"),h(!1);return}if(f.current)try{o().accessToken=t;let a=new(o()).Map({container:f.current,style:"mapbox://styles/mapbox/streets-v12",center:[e.lng,e.lat],zoom:d});return a.addControl(new(o()).NavigationControl,"top-right"),a.addControl(new(o()).FullscreenControl,"top-right"),r&&a.on("click",e=>{r({lat:e.lngLat.lat,lng:e.lngLat.lng})}),a.on("load",()=>{h(!1)}),a.on("error",e=>{console.error("Mapbox error:",e),y("Failed to load map"),h(!1)}),x.current=a,()=>{a.remove()}}catch(e){console.error("Error initializing Mapbox:",e),y("Failed to initialize map"),h(!1)}},[]),(0,s.useEffect)(()=>{x.current&&!p&&x.current.setCenter([e.lng,e.lat])},[e.lat,e.lng,p]),(0,s.useEffect)(()=>{x.current&&!p&&x.current.setZoom(d)},[d,p]),(0,s.useEffect)(()=>{if(x.current&&!p&&(g.current.forEach(e=>e.remove()),g.current=[],t.forEach((e,t)=>{let r=document.createElement("div");r.className="mapbox-marker",r.style.width="32px",r.style.height="32px",r.style.borderRadius="50%",r.style.backgroundColor=0===t?"#10b981":"#ef4444",r.style.border="2px solid white",r.style.boxShadow="0 2px 4px rgba(0,0,0,0.3)",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.color="white",r.style.fontWeight="bold",r.style.fontSize="14px",r.style.cursor="pointer",e.label&&(r.textContent=e.label);let a=new(o()).Marker(r).setLngLat([e.lng,e.lat]).addTo(x.current);if(e.title){let t=new(o()).Popup({offset:25}).setText(e.title);a.setPopup(t)}g.current.push(a)}),t.length>1)){let e=new(o()).LngLatBounds;t.forEach(t=>{e.extend([t.lng,t.lat])}),x.current.fitBounds(e,{padding:50})}},[t,p]),(0,s.useEffect)(()=>{if(!x.current||p||!c||!u||!m)return;let e=x.current;return e.isStyleLoaded()?v(e,u,m):e.once("load",()=>{v(e,u,m)}),()=>{e&&e.getStyle()&&(e.getLayer("route")&&e.removeLayer("route"),e.getSource("route")&&e.removeSource("route"))}},[u,m,c,p]);let v=async(e,t,r)=>{try{if(!e||!e.getStyle())return;let a=await fetch(`https://api.mapbox.com/directions/v5/mapbox/driving/${t.lng},${t.lat};${r.lng},${r.lat}?geometries=geojson&access_token=${o().accessToken}`,{method:"GET"}),s=await a.json();if(!s.routes||0===s.routes.length){console.error("No route found");return}let n=s.routes[0],l=n.geometry.coordinates;if(!e||!e.getStyle())return;e.getLayer("route")&&e.removeLayer("route"),e.getSource("route")&&e.removeSource("route"),e.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:l}}}),e.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#4F46E5","line-width":5,"line-opacity":.8}});let i=new(o()).LngLatBounds;l.forEach(e=>{i.extend(e)}),e.fitBounds(i,{padding:50})}catch(e){console.error("Error fetching directions:",e)}};return b?a.jsx("div",{className:`relative ${n}`,children:a.jsx("div",{className:"w-full h-full rounded-lg bg-gradient-to-br from-blue-100 to-blue-200 dark:from-gray-800 dark:to-gray-900 flex items-center justify-center border-2 border-dashed border-muted",children:(0,a.jsxs)("div",{className:"text-center p-8 max-w-md",children:[a.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDDFAï¸"}),a.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:"Map Configuration Required"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:b}),a.jsx("div",{className:"mt-4 p-3 bg-muted rounded-lg text-left",children:(0,a.jsxs)("p",{className:"text-xs font-mono text-muted-foreground",children:["Add to .env.local:",a.jsx("br",{}),a.jsx("span",{className:"text-primary",children:"NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN"}),"=your_token"]})})]})})}):(0,a.jsxs)("div",{className:`relative ${n}`,children:[p&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/20 backdrop-blur-sm z-10 rounded-lg",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(l.Z,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-2"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Loading map..."})]})}),a.jsx("div",{ref:f,className:"w-full h-full rounded-lg",style:{minHeight:"300px"}})]})}},2410:(e,t,r)=>{r.d(t,{P:()=>m});var a=r(80),s=r(9885),n=r(3020),o=r(7052),l=r(4796),i=r(7094),d=r(6583),c=r(5441),u=r(6908);function m({pickup:e,destination:t,showDetails:r=!0,className:m}){let[f,x]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let r="pk.eyJ1Ijoibm9yZGluZWF6bmFnMTAiLCJhIjoiY21oMHpxOGZpMGp1NHJrc2I2Y215OTJ4bCJ9.yi3JNnvyyRinigIBdURecg";if(!r)return;let a=async()=>{try{let a=await fetch(`https://api.mapbox.com/directions/v5/mapbox/driving/${e.lng},${e.lat};${t.lng},${t.lat}?access_token=${r}`),s=await a.json();if(s.routes&&s.routes.length>0){let e=s.routes[0],t=e.distance/1609.34,r=e.duration/60,a=t<.1?`${Math.round(e.distance)} m`:`${t.toFixed(1)} mi`,n=r<1?`${Math.round(e.duration)} sec`:r<60?`${Math.round(r)} min`:`${Math.floor(r/60)} hr ${Math.round(r%60)} min`;x({distance:a,duration:n,estimatedFare:Math.round(100*(2+1.5*t))/100})}}catch(e){console.error("Error fetching route info:",e)}};a()},[e.lat,e.lng,t.lat,t.lng]),a.jsx("div",{className:m,children:(0,a.jsxs)(o.Zb,{children:[a.jsx(o.Ol,{children:a.jsx(o.ll,{className:"text-lg",children:"Route Overview"})}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[r&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center flex-shrink-0",children:a.jsx(i.Z,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Pickup Location"}),a.jsx("p",{className:"text-sm font-medium break-words",children:e.address||`${e.lat.toFixed(4)}, ${e.lng.toFixed(4)}`})]})]}),a.jsx("div",{className:"pl-4 border-l-2 border-dashed border-muted ml-4 py-2",children:f&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(l.C,{variant:"secondary",className:"gap-1",children:[a.jsx(d.Z,{className:"w-3 h-3"}),f.distance]}),(0,a.jsxs)(l.C,{variant:"secondary",className:"gap-1",children:[a.jsx(c.Z,{className:"w-3 h-3"}),f.duration]}),f.estimatedFare&&(0,a.jsxs)(l.C,{variant:"secondary",className:"gap-1",children:[a.jsx(u.Z,{className:"w-3 h-3"}),"$",f.estimatedFare.toFixed(2)]})]})}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center flex-shrink-0",children:a.jsx(i.Z,{className:"w-4 h-4 text-red-600 dark:text-red-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Destination"}),a.jsx("p",{className:"text-sm font-medium break-words",children:t.address||`${t.lat.toFixed(4)}, ${t.lng.toFixed(4)}`})]})]})]}),a.jsx(n.G,{center:{lat:(e.lat+t.lat)/2,lng:(e.lng+t.lng)/2},showDirections:!0,origin:e,destination:t,markers:[{...e,label:"A",title:e.address||"Pickup"},{...t,label:"B",title:t.address||"Destination"}],className:"h-[400px] rounded-lg",zoom:12})]})]})})}},4796:(e,t,r)=>{r.d(t,{C:()=>l});var a=r(80);r(9885);var s=r(7389),n=r(3161);let o=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...r}){return a.jsx("div",{className:(0,n.cn)(o({variant:t}),e),...r})}},8384:(e,t,r)=>{r.d(t,{z:()=>d});var a=r(80),s=r(9885),n=r(1085),o=r(7389),l=r(3161);let i=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...o},d)=>{let c=s?n.g7:"button";return a.jsx(c,{className:(0,l.cn)(i({variant:t,size:r,className:e})),ref:d,...o})});d.displayName="Button"},7052:(e,t,r)=>{r.d(t,{Ol:()=>l,SZ:()=>d,Zb:()=>o,aY:()=>c,ll:()=>i});var a=r(80),s=r(9885),n=r(3161);let o=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));o.displayName="Card";let l=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let i=s.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));i.displayName="CardTitle";let d=s.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},9424:(e,t,r)=>{r.d(t,{I:()=>o});var a=r(80),s=r(9885),n=r(3161);let o=s.forwardRef(({className:e,type:t,...r},s)=>a.jsx("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));o.displayName="Input"},3478:(e,t,r)=>{r.d(t,{_:()=>d});var a=r(80),s=r(9885),n=r(3618),o=r(7389),l=r(3161);let i=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef(({className:e,...t},r)=>a.jsx(n.f,{ref:r,className:(0,l.cn)(i(),e),...t}));d.displayName=n.f.displayName},999:(e,t,r)=>{r.d(t,{SP:()=>d,dr:()=>i,mQ:()=>l,nU:()=>c});var a=r(80),s=r(9885),n=r(3261),o=r(3161);let l=n.fC,i=s.forwardRef(({className:e,...t},r)=>a.jsx(n.aV,{ref:r,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));i.displayName=n.aV.displayName;let d=s.forwardRef(({className:e,...t},r)=>a.jsx(n.xz,{ref:r,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));d.displayName=n.xz.displayName;let c=s.forwardRef(({className:e,...t},r)=>a.jsx(n.VY,{ref:r,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));c.displayName=n.VY.displayName},3161:(e,t,r)=>{r.d(t,{cn:()=>n});var a=r(566),s=r(8126);function n(...e){return(0,s.m6)((0,a.W)(e))}}};