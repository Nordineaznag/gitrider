"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[592],{4461:function(e,t,r){r.d(t,{_:function(){return x}});var n=r(7437),a=r(2265),s=r(2991),o=r(1908),i=r(6672),l=r(6110),c=r(3023),d=r(1827),u=r(3715),m=r(6142),f=r(2682);function x(e){let{onLocationSelect:t,initialLocation:r,label:x="Select Location",placeholder:g="Search for a location..."}=e,[p,h]=(0,a.useState)(r||null),[b,y]=(0,a.useState)(null),[v,j]=(0,a.useState)(""),[N,w]=(0,a.useState)(!1),[k,C]=(0,a.useState)(!1),[I,S]=(0,a.useState)([]),[E,L]=(0,a.useState)(!1),[M,Z]=(0,a.useState)(!1),F=(0,a.useRef)(null),J=(0,a.useRef)();(0,a.useEffect)(()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{y({lat:e.coords.latitude,lng:e.coords.longitude})},e=>{},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},[]);let R=async e=>{if(j(e),e.length<2){S([]),L(!1);return}J.current&&clearTimeout(J.current),J.current=setTimeout(async()=>{let t="pk.eyJ1Ijoibm9yZGluZWF6bmFnMTAiLCJhIjoiY21oMHpxOGZpMGp1NHJrc2I2Y215OTJ4bCJ9.yi3JNnvyyRinigIBdURecg";if(t){Z(!0);try{let r="https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat(t,"&autocomplete=true&limit=8&types=address,poi,place,locality,neighborhood");b&&(r+="&proximity=".concat(b.lng,",").concat(b.lat));let n=await fetch(r),a=await n.json();a.features&&(S(a.features.map(e=>({id:e.id,place_name:e.place_name,center:e.center,place_type:e.place_type,text:e.text,context:e.context}))),L(!0))}catch(e){console.error("Error searching locations:",e)}finally{Z(!1)}}},300)},O=e=>{j(e.place_name),L(!1);let r={lat:e.center[1],lng:e.center[0],address:e.place_name};h(r),t(r)},_=async e=>{h(e),w(!0);let r="pk.eyJ1Ijoibm9yZGluZWF6bmFnMTAiLCJhIjoiY21oMHpxOGZpMGp1NHJrc2I2Y215OTJ4bCJ9.yi3JNnvyyRinigIBdURecg";if(!r){t(e),w(!1);return}try{let n=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(e.lng,",").concat(e.lat,".json?access_token=").concat(r,"&types=address,poi,place")),a=await n.json();if(a.features&&a.features.length>0){let r=a.features[0].place_name;j(r),t({...e,address:r})}else t(e)}catch(r){console.error("Error reverse geocoding:",r),t(e)}finally{w(!1)}};return(0,a.useEffect)(()=>{let e=e=>{F.current&&!F.current.contains(e.target)&&L(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(i._,{htmlFor:"location-search",children:x}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(d.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,n.jsx)(o.I,{ref:F,id:"location-search",type:"text",placeholder:g,value:v,onChange:e=>R(e.target.value),onFocus:()=>{I.length>0&&L(!0)},className:"pl-10 pr-10",autoComplete:"off"}),(N||M)&&(0,n.jsx)(u.Z,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 animate-spin text-muted-foreground"})]}),E&&I.length>0&&(0,n.jsx)(l.Zb,{className:"absolute top-full left-0 right-0 mt-1 z-50 max-h-[400px] overflow-y-auto shadow-lg",children:(0,n.jsx)(l.aY,{className:"p-0",children:I.map(e=>(0,n.jsxs)("button",{onClick:()=>O(e),className:"w-full text-left px-4 py-3 hover:bg-muted transition-colors flex items-start gap-3 border-b last:border-b-0",children:[(0,n.jsx)(m.Z,{className:"w-4 h-4 mt-0.5 text-primary flex-shrink-0"}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("p",{className:"text-sm font-medium truncate",children:e.text||e.place_name.split(",")[0]}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.place_name})]})]},e.id))})})]}),(0,n.jsxs)(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{"geolocation"in navigator?(C(!0),navigator.geolocation.getCurrentPosition(e=>{let t={lat:e.coords.latitude,lng:e.coords.longitude};y(t),_(t),C(!1)},e=>{console.error("Error getting location:",e),C(!1);let t="Unable to get your location. ";switch(e.code){case e.PERMISSION_DENIED:t+="Please enable location permissions in your browser.";break;case e.POSITION_UNAVAILABLE:t+="Location information is unavailable.";break;case e.TIMEOUT:t+="Location request timed out."}alert(t)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):alert("Geolocation is not supported by your browser.")},disabled:N||k,className:"w-full",children:[k?(0,n.jsx)(u.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,n.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),k?"Getting Location...":"Use My Current Location"]})]}),(0,n.jsx)(l.Zb,{children:(0,n.jsx)(l.aY,{className:"p-0",children:(0,n.jsx)(s.G,{center:p||b||{lat:40.7128,lng:-74.006},markers:p?[{...p,label:"\uD83D\uDCCD",title:v||"Selected Location"}]:[],onLocationSelect:_,className:"h-[400px] rounded-lg",zoom:p?16:b?13:11})})}),p&&(0,n.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-muted rounded-lg",children:[(0,n.jsx)(m.Z,{className:"w-4 h-4 mt-0.5 text-primary flex-shrink-0"}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Selected Location"}),v?(0,n.jsx)("p",{className:"text-sm font-medium break-words",children:v}):(0,n.jsxs)("p",{className:"text-sm font-medium",children:[p.lat.toFixed(6),","," ",p.lng.toFixed(6)]})]})]})]})}},2991:function(e,t,r){r.d(t,{G:function(){return c}});var n=r(7437),a=r(2265),s=r(3901),o=r.n(s);r(9360);var i=r(519);let l={lat:40.7128,lng:-74.006};function c(e){let{center:t=l,markers:r=[],onLocationSelect:s,className:c,zoom:d=13,showDirections:u=!1,origin:m,destination:f}=e,x=(0,a.useRef)(null),g=(0,a.useRef)(null),p=(0,a.useRef)([]),[h,b]=(0,a.useState)(!0),[y,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e="pk.eyJ1Ijoibm9yZGluZWF6bmFnMTAiLCJhIjoiY21oMHpxOGZpMGp1NHJrc2I2Y215OTJ4bCJ9.yi3JNnvyyRinigIBdURecg";if(!e){v("Mapbox access token not configured"),b(!1);return}if(x.current)try{o().accessToken=e;let r=new(o()).Map({container:x.current,style:"mapbox://styles/mapbox/streets-v12",center:[t.lng,t.lat],zoom:d});return r.addControl(new(o()).NavigationControl,"top-right"),r.addControl(new(o()).FullscreenControl,"top-right"),s&&r.on("click",e=>{s({lat:e.lngLat.lat,lng:e.lngLat.lng})}),r.on("load",()=>{b(!1)}),r.on("error",e=>{console.error("Mapbox error:",e),v("Failed to load map"),b(!1)}),g.current=r,()=>{r.remove()}}catch(e){console.error("Error initializing Mapbox:",e),v("Failed to initialize map"),b(!1)}},[]),(0,a.useEffect)(()=>{g.current&&!h&&g.current.setCenter([t.lng,t.lat])},[t.lat,t.lng,h]),(0,a.useEffect)(()=>{g.current&&!h&&g.current.setZoom(d)},[d,h]),(0,a.useEffect)(()=>{if(g.current&&!h&&(p.current.forEach(e=>e.remove()),p.current=[],r.forEach((e,t)=>{let r=document.createElement("div");r.className="mapbox-marker",r.style.width="32px",r.style.height="32px",r.style.borderRadius="50%",r.style.backgroundColor=0===t?"#10b981":"#ef4444",r.style.border="2px solid white",r.style.boxShadow="0 2px 4px rgba(0,0,0,0.3)",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.color="white",r.style.fontWeight="bold",r.style.fontSize="14px",r.style.cursor="pointer",e.label&&(r.textContent=e.label);let n=new(o()).Marker(r).setLngLat([e.lng,e.lat]).addTo(g.current);if(e.title){let t=new(o()).Popup({offset:25}).setText(e.title);n.setPopup(t)}p.current.push(n)}),r.length>1)){let e=new(o()).LngLatBounds;r.forEach(t=>{e.extend([t.lng,t.lat])}),g.current.fitBounds(e,{padding:50})}},[r,h]),(0,a.useEffect)(()=>{if(!g.current||h||!u||!m||!f)return;let e=g.current;return e.isStyleLoaded()?j(e,m,f):e.once("load",()=>{j(e,m,f)}),()=>{e&&e.getStyle()&&(e.getLayer("route")&&e.removeLayer("route"),e.getSource("route")&&e.removeSource("route"))}},[m,f,u,h]);let j=async(e,t,r)=>{try{if(!e||!e.getStyle())return;let n=await fetch("https://api.mapbox.com/directions/v5/mapbox/driving/".concat(t.lng,",").concat(t.lat,";").concat(r.lng,",").concat(r.lat,"?geometries=geojson&access_token=").concat(o().accessToken),{method:"GET"}),a=await n.json();if(!a.routes||0===a.routes.length){console.error("No route found");return}let s=a.routes[0],i=s.geometry.coordinates;if(!e||!e.getStyle())return;e.getLayer("route")&&e.removeLayer("route"),e.getSource("route")&&e.removeSource("route"),e.addSource("route",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i}}}),e.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#4F46E5","line-width":5,"line-opacity":.8}});let l=new(o()).LngLatBounds;i.forEach(e=>{l.extend(e)}),e.fitBounds(l,{padding:50})}catch(e){console.error("Error fetching directions:",e)}};return y?(0,n.jsx)("div",{className:"relative ".concat(c),children:(0,n.jsx)("div",{className:"w-full h-full rounded-lg bg-gradient-to-br from-blue-100 to-blue-200 dark:from-gray-800 dark:to-gray-900 flex items-center justify-center border-2 border-dashed border-muted",children:(0,n.jsxs)("div",{className:"text-center p-8 max-w-md",children:[(0,n.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDDFAÔ∏è"}),(0,n.jsx)("p",{className:"text-sm font-medium text-foreground mb-2",children:"Map Configuration Required"}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:y}),(0,n.jsx)("div",{className:"mt-4 p-3 bg-muted rounded-lg text-left",children:(0,n.jsxs)("p",{className:"text-xs font-mono text-muted-foreground",children:["Add to .env.local:",(0,n.jsx)("br",{}),(0,n.jsx)("span",{className:"text-primary",children:"NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN"}),"=your_token"]})})]})})}):(0,n.jsxs)("div",{className:"relative ".concat(c),children:[h&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/20 backdrop-blur-sm z-10 rounded-lg",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(i.Z,{className:"w-8 h-8 animate-spin text-primary mx-auto mb-2"}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Loading map..."})]})}),(0,n.jsx)("div",{ref:x,className:"w-full h-full rounded-lg",style:{minHeight:"300px"}})]})}},592:function(e,t,r){r.d(t,{P:function(){return m}});var n=r(7437),a=r(2265),s=r(2991),o=r(6110),i=r(9155),l=r(6142),c=r(2682),d=r(6141),u=r(1298);function m(e){let{pickup:t,destination:r,showDetails:m=!0,className:f}=e,[x,g]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e="pk.eyJ1Ijoibm9yZGluZWF6bmFnMTAiLCJhIjoiY21oMHpxOGZpMGp1NHJrc2I2Y215OTJ4bCJ9.yi3JNnvyyRinigIBdURecg";if(!e)return;let n=async()=>{try{let n=await fetch("https://api.mapbox.com/directions/v5/mapbox/driving/".concat(t.lng,",").concat(t.lat,";").concat(r.lng,",").concat(r.lat,"?access_token=").concat(e)),a=await n.json();if(a.routes&&a.routes.length>0){let e=a.routes[0],t=e.distance/1609.34,r=e.duration/60,n=t<.1?"".concat(Math.round(e.distance)," m"):"".concat(t.toFixed(1)," mi"),s=r<1?"".concat(Math.round(e.duration)," sec"):r<60?"".concat(Math.round(r)," min"):"".concat(Math.floor(r/60)," hr ").concat(Math.round(r%60)," min");g({distance:n,duration:s,estimatedFare:Math.round(100*(2+1.5*t))/100})}}catch(e){console.error("Error fetching route info:",e)}};n()},[t.lat,t.lng,r.lat,r.lng]),(0,n.jsx)("div",{className:f,children:(0,n.jsxs)(o.Zb,{children:[(0,n.jsx)(o.Ol,{children:(0,n.jsx)(o.ll,{className:"text-lg",children:"Route Overview"})}),(0,n.jsxs)(o.aY,{className:"space-y-4",children:[m&&(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center flex-shrink-0",children:(0,n.jsx)(l.Z,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Pickup Location"}),(0,n.jsx)("p",{className:"text-sm font-medium break-words",children:t.address||"".concat(t.lat.toFixed(4),", ").concat(t.lng.toFixed(4))})]})]}),(0,n.jsx)("div",{className:"pl-4 border-l-2 border-dashed border-muted ml-4 py-2",children:x&&(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,n.jsxs)(i.C,{variant:"secondary",className:"gap-1",children:[(0,n.jsx)(c.Z,{className:"w-3 h-3"}),x.distance]}),(0,n.jsxs)(i.C,{variant:"secondary",className:"gap-1",children:[(0,n.jsx)(d.Z,{className:"w-3 h-3"}),x.duration]}),x.estimatedFare&&(0,n.jsxs)(i.C,{variant:"secondary",className:"gap-1",children:[(0,n.jsx)(u.Z,{className:"w-3 h-3"}),"$",x.estimatedFare.toFixed(2)]})]})}),(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center flex-shrink-0",children:(0,n.jsx)(l.Z,{className:"w-4 h-4 text-red-600 dark:text-red-400"})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:"Destination"}),(0,n.jsx)("p",{className:"text-sm font-medium break-words",children:r.address||"".concat(r.lat.toFixed(4),", ").concat(r.lng.toFixed(4))})]})]})]}),(0,n.jsx)(s.G,{center:{lat:(t.lat+r.lat)/2,lng:(t.lng+r.lng)/2},showDirections:!0,origin:t,destination:r,markers:[{...t,label:"A",title:t.address||"Pickup"},{...r,label:"B",title:r.address||"Destination"}],className:"h-[400px] rounded-lg",zoom:12})]})]})})}},9155:function(e,t,r){r.d(t,{C:function(){return i}});var n=r(7437);r(2265);var a=r(9213),s=r(9311);let o=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)(o({variant:r}),t),...a})}},3023:function(e,t,r){r.d(t,{z:function(){return c}});var n=r(7437),a=r(2265),s=r(7256),o=r(9213),i=r(9311);let l=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(l({variant:a,size:o,className:r})),ref:t,...d})});c.displayName="Button"},6110:function(e,t,r){r.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return o},aY:function(){return d},ll:function(){return l}});var n=r(7437),a=r(2265),s=r(9311);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});o.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},1908:function(e,t,r){r.d(t,{I:function(){return o}});var n=r(7437),a=r(2265),s=r(9311);let o=a.forwardRef((e,t)=>{let{className:r,type:a,...o}=e;return(0,n.jsx)("input",{type:a,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...o})});o.displayName="Input"},6672:function(e,t,r){r.d(t,{_:function(){return c}});var n=r(7437),a=r(2265),s=r(6743),o=r(9213),i=r(9311);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.f,{ref:t,className:(0,i.cn)(l(),r),...a})});c.displayName=s.f.displayName},7579:function(e,t,r){r.d(t,{SP:function(){return c},dr:function(){return l},mQ:function(){return i},nU:function(){return d}});var n=r(7437),a=r(2265),s=r(1758),o=r(9311);let i=s.fC,l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.aV,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...a})});l.displayName=s.aV.displayName;let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.xz,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...a})});c.displayName=s.xz.displayName;let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.VY,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...a})});d.displayName=s.VY.displayName},5806:function(e,t,r){r.d(t,{H:function(){return i},a:function(){return l}});var n=r(7437),a=r(2265),s=r(6763);let o=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,a.useState)(null),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{s.O.auth.getSession().then(e=>{var t;let{data:{session:r}}=e;i(null!==(t=null==r?void 0:r.user)&&void 0!==t?t:null),(null==r?void 0:r.user)?m(r.user.id):u(!1)});let{data:{subscription:e}}=s.O.auth.onAuthStateChange((e,t)=>{var r;i(null!==(r=null==t?void 0:t.user)&&void 0!==r?r:null),(null==t?void 0:t.user)?m(t.user.id):(c(null),u(!1))});return()=>e.unsubscribe()},[]);let m=async e=>{let{data:t,error:r}=await s.O.from("profiles").select("*").eq("id",e).maybeSingle();t&&c(t),u(!1)},f=async(e,t,r,n)=>{let{data:a,error:o}=await s.O.auth.signUp({email:e,password:t});if(!o&&a.user){let{error:t}=await s.O.from("profiles").insert([{id:a.user.id,email:e,full_name:r,role:n}]);return{error:t}}return{error:o}},x=async(e,t)=>{let{error:r}=await s.O.auth.signInWithPassword({email:e,password:t});return{error:r}},g=async()=>{await s.O.auth.signOut()};return(0,n.jsx)(o.Provider,{value:{user:r,profile:l,loading:d,signUp:f,signIn:x,signOut:g},children:t})}function l(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6763:function(e,t,r){r.d(t,{O:function(){return a}});var n=r(5257);let a=(0,n.eI)("https://lzuacwyqrqzohsofdvbp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx6dWFjd3lxcnF6b2hzb2ZkdmJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEzMzUzMDcsImV4cCI6MjA3NjkxMTMwN30.4RJPvz55Qq2v4NRlLFYjBlv2dGmB5YuSCbLk-93OdDM")},9311:function(e,t,r){r.d(t,{cn:function(){return s}});var n=r(7042),a=r(4769);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}}}]);